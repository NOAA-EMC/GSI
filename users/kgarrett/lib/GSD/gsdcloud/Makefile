#
#     ##################################################################
#     ##################################################################
#     ######                                                      ######
#     ######      Advanced Regional Prediction System (ARPS)      ######
#     ######                   Version 5.0                        ######
#     ######                                                      ######
#     ######                     Developed by                     ######
#     ######     Center for Analysis and Prediction of Storms     ######
#     ######                University of Oklahoma                ######
#     ######                                                      ######
#     ##################################################################
#     ##################################################################
#
#=======================================================================
#
#  PURPOSE: This makefile generates the generalized cloud analysis lib
#
#  AUTHOR:  Ming HU
#           4/22/2006
#
#  Modification history:
#
#=======================================================================

#-----------------------------------------------------------------------
#
# Default shell
#
#-----------------------------------------------------------------------

# SHELL=/bin/csh

#-----------------------------------------------------------------------
#
# Default names of the loader and tar, can be replaced on the command
# line for other system
#
#-----------------------------------------------------------------------

FTN = ifort
LDR = ifort
CC  = cc

GNRL_LD = $(LDR)

TAR = tar
AWK = awk
RM  = rm
LN  = ln

ARFLAG =

TOPDIR = 

INCLDIR = 

#-----------------------------------------------------------------------
#
# Compiler Flag of Options. The default is for AIX Fortran xlf.
#
#-----------------------------------------------------------------------

FFLAGS = -O3 -fp-model strict -convert big_endian -assume byterecl -implicitnone -traceback #   -I../../../include 
CFLAGS = 
LDFLAGS =

FIXFLAGS  = 
FREEFLAGS = 

#-----------------------------------------------------------------------
#
# Dependencies
#
#-----------------------------------------------------------------------

.SUFFIXES: $(SUFFIXES) .f90

.f.o:
	$(FTN) $(FFLAGS) $(FIXFLAGS) -c $<
.f90.o:
	$(FTN) $(FFLAGS) $(FREEFLAGS) -c $<
.c.o:
	$(CC)  $(CFLAGS) -c $<

#-----------------------------------------------------------------------
#
# Executable to be generated by this make file:
#
#-----------------------------------------------------------------------


#-----------------------------------------------------------------------
#
# Object library to be generated for ARPS solver:
#
# LIBGNRLCLD = libgnrlcld    shared library
#
#-----------------------------------------------------------------------

LIBGNRLCLD = libgsdcloud

#-----------------------------------------------------------------------
#
# List of machine-dependent object codes
#
#-----------------------------------------------------------------------

GNRLCLDOBJS = kinds.o                    constants.o \
              ARPS_cldLib.o              cloudCover_radar.o     mthermo.o           \
              BackgroundCld.o            cloudLWC.o             pcp_mxr_ARPSlib.o   \
              BckgrndCC.o                cloudLayers.o          radar_ref2tten.o    \
              PrecipMxr_radar.o          cloudType.o            read_Lightning_cld.o \
              PrecipType.o               cloud_saturation.o     read_NESDIS.o        \
              TempAdjust.o               read_Surface.o  \
              adaslib.o                  convert_lghtn2ref.o    read_nasalarc_cld.o  \
              build_missing_REFcone.o    get_sfm_1d_gnl.o       read_radar_ref.o     \
              cloudCover_NESDIS.o        smooth.o      \
              cloudCover_Surface.o       map_ctp.o              vinterp_radar_ref.o  \
              hydro_mxr_thompson.o

##BackgroundCld.o read_Surface.o read_NESDIS.o \
              interp_NSSL_ref.o cloudCover_Surface.o     \
              BckgrndCC.o cloudCover_NESDIS.o cloudCover_radar.o \
              cloudLWC.o cloudLayers.o cloudType.o get_sfm_1d_gnl.o \
              PrecipType.o PrecipMxr_radar.o TempAdjust.o  \
              pcp_mxr_thompsonRUC.o \
              adaslib.o ARPS_cldLib.o mthermo.o pcp_mxr_ARPSlib.o   \
              convert_lghtn2ref.o mape_ctp.o read_NSSL_ref.o \
              read_Lightning_cld.o NSSL_ref2tten.o smooth.o \
	      build_missing_REFcone.o read_nasalarc_cld.o 

#-----------------------------------------------------------------------
#
# Set Default
#
#-----------------------------------------------------------------------

default: $(LIBGNRLCLD).a

#-----------------------------------------------------------------------
#
# Make ADAS shared library
#
#-----------------------------------------------------------------------

$(LIBGNRLCLD).a: $(GNRLCLDOBJS)
	ar $(ARFLAG) rc $@ $(GNRLCLDOBJS)
#	cp $(LIBGNRLCLD).a 

#-----------------------------------------------------------------------
#
# Remove the object code for individual programs
#
#-----------------------------------------------------------------------

clean:
	-$(RM) -f $(GNRLCLDOBJS) $(LIBGNRLCLD).a *.mod

